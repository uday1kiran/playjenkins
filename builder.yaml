#apiVersion: v1
#kind: Pod
#metadata:
#  name: kaniko
#spec:
#  containers:
#  - name: kubectl
#    image: joshendriks/alpine-k8s
#    command:
#    - /bin/cat
#    tty: true    
 # - name: kaniko
 #  image: gcr.io/kaniko-project/executor:debug
 #   command:
 #   - /busybox/cat
 #   tty: true
 #  volumeMounts:
 #     - name: kaniko-secret
 #       mountPath: /kaniko/.docker
 # volumes:
 #   - name: kaniko-secret
 #     secret:
 #       secretName: regcred
 #       items:
 #         - key: .dockerconfigjson
 #           path: config.json
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: tomcat
    image: uday1kiran/tomcatserver-centos:v02
    ports:
    - containerPort: 8080
    env:
    - name: DOCKER_HOST
      value: tcp://localhost:2375
  - name: dind
    image: docker:18.05-dind
    securityContext:
      privileged: true
    volumeMounts:
      - name: dind-storage
        mountPath: /var/lib/docker
  volumes:
    - name: dind-storage
      emptyDir: {}
